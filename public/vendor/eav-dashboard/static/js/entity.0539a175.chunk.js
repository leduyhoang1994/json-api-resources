(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{318:function(e,t,n){"use strict";n(279);var a=n(280),r=n(39),i=n(40),o=n(82),s=n(81),c=n(83),u=n(0),p=n(346),l=n.n(p),d=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.error&&!l()(e.error,this.props.error)&&("network"===this.props.error.type?a.a.error({message:"Network Error",description:this.props.error.message,duration:0}):"server"===this.props.error.type&&500===this.props.error.status&&a.a.error({message:this.props.error.error.errors[0].title,description:this.props.error.error.errors[0].detail,duration:0}))}},{key:"render",value:function(){return null}}]),t}(u.Component);t.a=d},550:function(e,t,n){"use strict";n.r(t);n(343);var a=n(340),r=(n(176),n(88)),i=(n(175),n(103)),o=(n(286),n(288)),s=n(102),c=n(39),u=n(40),p=n(82),l=n(81),d=n(83),m=(n(345),n(372)),h=n(30),f=n(0),y=n.n(f),b=n(34),g=n(31),j=n(3),v=n(43),S=n(129),O=n(318),w=(n(314),n(306)),E=(n(174),n(84)),x=(n(279),n(280)),k=(n(283),n(284)),z=n(164),D=n(7),C=n.n(D),N=n(282),_=n(20),q=n(51);function P(){var e=Object(h.a)(["\n  display: inline;\n  margin-left: 1rem;\n"]);return P=function(){return e},e}function A(){var e=Object(h.a)(["\n  color: #3eaf7c;  \n  text-transform: uppercase;\n"]);return A=function(){return e},e}function M(){var e=Object(h.a)(["\n  @media (max-width: 480px) {\n    width: 100%;\n    overflow-x: auto;\n  }\n"]);return M=function(){return e},e}function R(){var e=Object(h.a)(["\n  width: 200px;\n  margin-bottom: 0.75rem;\n"]);return R=function(){return e},e}var I=g.a.div(R()),J=g.a.div(M()),B=g.a.span(A()),L=g.a.div(P()),K=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={listSize:10,currentPageNo:1,data:[],loading:!1,total:null,showMenu:null},n.requestData=function(){var e=Object(N.a)(C.a.mark(function e(t,a){var r,i,o,c,u=arguments;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},n.setState({loading:!0}),e.next=4,Object(q.l)({entity:n.props.entity.entity_code},Object(s.a)({"page[size]":t,"page[number]":a},r));case 4:i=e.sent,o=i.data,c=i.meta,n.setState({data:o,loading:!1,currentPageNo:c.paginated.current_page,total:c.paginated.total});case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.search=function(e){n.requestData(n.state.listSize,1,{"filter[search]":e})},n.viewSet=function(e){n.props.dispatch(Object(j.j)({type:"set",entity:n.props.entity.entity_code,set:e}))},n.updateSet=function(e,t){t?n.setState(function(n){var a=n.data;return a["".concat(t)]=e.data,Object(s.a)({},n,{data:Object(z.a)(a)})}):n.setState(function(t){return Object(s.a)({},t,{data:Object(z.a)(t.data).concat([e.data])})})},n.addSet=function(){n.props.dispatch(Object(j.j)({type:"addSet",entity:n.props.entity,updateSet:n.updateSet}))},n.editSet=function(e,t,a){n.props.dispatch(Object(j.j)({type:"editSet",entity:n.props.entity,updateSet:n.updateSet,id:t,name:a,index:e}))},n.addAttribute=function(){n.props.dispatch(Object(j.j)({type:"addAttribute",entity:n.props.entity.entity_code}))},n.viewAttributes=function(){n.props.dispatch(Object(_.d)("/attributes?entity=".concat(n.props.entity.entity_code)))},n.handleDelete=function(){var e=Object(N.a)(C.a.mark(function e(t){var a,r,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState(function(e){return Object(s.a)({},e,{loading:!0})}),a=k.a.loading("Deleting..",0),e.prev=2,e.next=5,Object(q.c)({entity:n.props.entity.entity_code,set:t});case 5:a(),n.requestData(n.props.listSize,1),k.a.success("Set deleted.",2),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),"network"===e.t0.type?(r="Network Error",i=e.t0.message):"server"===e.t0.type&&(r=e.t0.error.errors[0].title,i=e.t0.error.errors[0].detail),a(),x.a.error({message:r,description:i,duration:0}),n.setState(function(e){return Object(s.a)({},e,{loading:!1})});case 16:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.requestData(this.state.listSize,1)}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name",render:function(t,n,a){return y.a.createElement(y.a.Fragment,null,y.a.createElement(B,null,t),e.state.showMenu===a&&y.a.createElement(L,null,y.a.createElement(E.a,{type:"dashed",size:"small",onClick:function(){return e.viewSet(n)}},"View"),y.a.createElement(E.a,{type:"primary",icon:"edit",size:"small",style:{marginLeft:8},onClick:function(){return e.editSet(a,n.id,t)}},"Edit Name"),y.a.createElement(w.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(n.id)}},y.a.createElement(E.a,{type:"danger",icon:"delete",size:"small",style:{marginLeft:8}},"Delete"))))}}];return y.a.createElement(f.Fragment,null,y.a.createElement(r.a,{type:"flex",justify:"space-around"},y.a.createElement(i.a,{span:24,md:12},y.a.createElement(r.a,{type:"flex",justify:"start"},y.a.createElement(i.a,{span:6},y.a.createElement(I,null,y.a.createElement(o.a.Search,{placeholder:"Search Set",size:"large",onSearch:this.search}))))),y.a.createElement(i.a,{span:24,md:12},y.a.createElement(r.a,{type:"flex",justify:"space-around"},y.a.createElement(E.a,{type:"dashed",style:{marginBottom:8},onClick:this.viewAttributes},"View Attributes"),y.a.createElement(E.a,{type:"primary",icon:"plus",style:{marginBottom:8},onClick:this.addSet},"Set"),y.a.createElement(E.a,{type:"primary",icon:"plus",style:{marginBottom:8},onClick:this.addAttribute},"Attribute")))),y.a.createElement(r.a,null,y.a.createElement(i.a,null,y.a.createElement(J,null,y.a.createElement(a.a,{onRow:function(t,n){return{onMouseEnter:function(t){return e.setState({showMenu:n})},onMouseLeave:function(t){return e.setState({showMenu:null})}}},pagination:{onChange:function(t){e.requestData(e.state.listSize,t)},current:this.state.currentPageNo,pageSize:this.state.listSize,size:"small",showQuickJumper:!0,showLessItems:!0,total:this.state.total},loading:this.state.loading,bordered:!0,showHeader:!1,rowKey:"id",title:function(){return"Sets"},dataSource:this.state.data,columns:t})))))}}]),t}(f.Component),F=Object(b.c)()(K);function U(){var e=Object(h.a)(["\n  color: #3eaf7c;  \n  text-transform: uppercase;\n"]);return U=function(){return e},e}function V(){var e=Object(h.a)(["\n  color: #6f42c1;  \n  background-color: rgba(27,31,35,.05);\n  padding: 5px 10px;\n  border-radius: 3px;\n"]);return V=function(){return e},e}function H(){var e=Object(h.a)(["\n  @media (max-width: 480px) {\n    width: 100%;\n    overflow-x: auto;\n  }\n"]);return H=function(){return e},e}function Q(){var e=Object(h.a)(["\n  width: 200px;\n  margin-bottom: 1rem;\n  @media (min-width: 996px) {\n    width: 40%;\n  }\n"]);return Q=function(){return e},e}var T=g.a.div(Q()),W=g.a.div(H()),G=g.a.span(V()),X=g.a.span(U()),Y=[{title:"Code",dataIndex:"entity_code",key:"entity_code",render:function(e){return y.a.createElement(X,null,e)}},{title:"Class",dataIndex:"entity_class",key:"entity_class",render:function(e){return y.a.createElement(G,null,e)}},{title:"Table",dataIndex:"entity_table",key:"entity_table",render:function(e){return y.a.createElement(m.a,{color:"blue",key:e},e.toUpperCase())}}],Z=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).requestData=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.props.dispatch(Object(j.g)({query:Object(s.a)({"page[size]":e,"page[number]":t},a)}))},n.search=function(e){n.requestData(n.props.listSize,1,{"filter[search]":e})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.entities.get("data").size&&this.props.entities.getIn(["meta","paginated","current_page"])===this.props.currentPageNo||this.requestData(this.props.listSize,this.props.currentPageNo)}},{key:"componentWillReceiveProps",value:function(e){e.currentPageNo!==this.props.currentPageNo&&this.requestData(this.props.listSize,e.currentPageNo)}},{key:"render",value:function(){var e=this;return y.a.createElement(r.a,null,y.a.createElement(i.a,{span:24},y.a.createElement(r.a,null,y.a.createElement(i.a,{span:24,md:12},y.a.createElement(T,null,y.a.createElement(o.a.Search,{placeholder:"Search Entity",size:"large",onSearch:this.search}))),y.a.createElement(i.a,{span:24,md:12,style:{textAlign:"right"}}))),y.a.createElement(i.a,{span:24},y.a.createElement(O.a,{error:this.props.entities.get("errors")}),y.a.createElement(W,null,y.a.createElement(a.a,{bordered:!0,rowKey:"id",pagination:{onChange:function(t){e.requestData(e.props.listSize,t),e.props.dispatch(Object(j.t)({type:"entity",number:t}))},current:this.props.currentPageNo,pageSize:this.props.listSize,simple:!0,total:this.props.entities.getIn(["meta","paginated","total"])},dataSource:this.props.entities.get("data").toJS(),loading:this.props.entities.get("loading"),expandedRowKeys:this.props.expandRows.toJS(),expandedRowRender:function(e,t){return y.a.createElement(F,{entity:e,index:t})},onExpand:function(t,n){return e.props.dispatch(Object(j.d)({type:"entity",keys:t?[n.id]:[]}))},expandRowByClick:!0,columns:Y}))))}}]),t}(f.Component);t.default=Object(b.c)(function(e){return{entities:Object(S.b)(e),currentPageNo:Object(v.g)("entity",e),expandRows:Object(v.f)("entity",e),listSize:Object(v.h)("entity",e)}})(Z)}}]);