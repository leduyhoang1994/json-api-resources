(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{547:function(e,t,a){"use strict";a.r(t);a(174);var r=a(84),n=(a(289),a(290)),o=(a(286),a(288)),i=a(7),s=a.n(i),l=(a(279),a(280)),c=(a(283),a(284)),u=a(282),p=a(39),d=a(40),m=a(82),h=a(81),f=a(83),b=a(0),v=a.n(b),g=a(34),y=a(3),E=a(51);var S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.onSave=function(){var e=Object(u.a)(s.a.mark(function e(t){var r,n,o,i,u,p,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState(function(e){return{loading:!0}}),r=c.a.loading("Saving changes..",0),e.prev=2,n={data:{type:"attribute_group",attributes:{name:t.name}}},e.next=6,Object(E.q)({entity:a.props.entity,set:a.props.set.id},n,{});case 6:o=e.sent,a.props.dispatch(Object(y.u)(o)),r(),a.setState(function(e){return{loading:!1}}),c.a.success("Changes has been saved.",1).then(function(){a.props.close()}),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(2),"network"===e.t0.type?(i="Network Error",u=e.t0.message):"server"===e.t0.type&&500===e.t0.status?(i=e.t0.error.errors[0].title,u=e.t0.error.errors[0].detail):(p=a.props.form.setFields,d={},e.t0.error.errors.forEach(function(e){var a=e.source.pointer.split("/");d[a[a.length-1]]={touched:!0,value:t[a[a.length-1]],errors:[new Error(e.detail)]}}),p(d),i="Input Error",u=""),r(),l.a.error({message:i,description:u,duration:0}),a.setState(function(e){return{loading:!1}});case 19:case"end":return e.stop()}},e,null,[[2,13]])}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.onSave(t)})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields().catch(function(){})}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,i=t.getFieldsError,s=t.getFieldError,l=(0,t.isFieldTouched)("name")&&s("name");return v.a.createElement(n.a,{layout:"horizontal",onSubmit:this.handleSubmit},v.a.createElement(n.a.Item,{label:"Entity"},a("entity",{initialValue:this.props.entity})(v.a.createElement(o.a,{disabled:!0}))),v.a.createElement(n.a.Item,{label:"Set"},v.a.createElement(o.a,{disabled:!0,value:this.props.set.name}),a("set",{initialValue:this.props.set.id})(v.a.createElement(o.a,{type:"hidden"}))),v.a.createElement(n.a.Item,{label:"Name",validateStatus:l?"error":"",help:l||""},a("name",{rules:[{required:!0,message:"Please input name!"}]})(v.a.createElement(o.a,{placeholder:"Name",autoComplete:"off",autoFocus:!0}))),v.a.createElement(n.a.Item,null,v.a.createElement(r.a,{style:{marginRight:8},onClick:this.props.close},"Cancel"),v.a.createElement(r.a,{type:"primary",htmlType:"submit",loading:this.state.loading,disabled:(e=i(),Object.keys(e).some(function(t){return e[t]}))},"Save")))}}]),t}(b.PureComponent),w=n.a.create({name:"add_group"})(S);t.default=Object(g.c)()(w)}}]);